<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head th:replace="header :: header(~{::meta},~{::title},~{::link})">
    <!-- csrf -->
    <meta name="_csrf" content="" th:content="${_csrf.token}"/>
    <!-- default header name is X-CSRF-TOKEN -->
    <meta name="_csrf_header" content="" th:content="${_csrf.headerName}"/>

    <title th:text="'后台-' + #{ web.title}">ISY</title>
    <!-- Loading CSS -->
    <link href="/plugins/loading/css/showLoading.min.css" rel="stylesheet"
          th:href="@{/plugins/loading/css/showLoading.min.css}"/>
    <!-- messenger CSS -->
    <link href="/plugins/messenger/messenger.css" th:href="@{/webjars/messenger/build/css/messenger.css}"
          rel="stylesheet"/>
    <link href="/plugins/messenger/messenger-theme-flat.css"
          th:href="@{/webjars/messenger/build/css/messenger-theme-flat.css}" rel="stylesheet"/>
    <link href="/assets/css/animate.css" th:href="@{/assets/css/animate.css}" rel="stylesheet"/>
</head>

<body>
<!-- Navigation Bar-->
<header id="topnav">
    <div class="topbar-main">
        <div class="container">

            <!-- LOGO -->
            <div class="topbar-left">
                <a href="#" th:href="@{/web/menu/backstage}" class="logo">
                    <i class="zmdi zmdi-group-work icon-c-logo"></i>
                    <span th:text="#{web.app.name}" id="webAppName"></span>
                </a>
            </div>
            <!-- End Logo container-->


            <div class="menu-extras navbar-topbar">

                <ul class="list-inline float-right mb-0">

                    <li class="list-inline-item">
                        <!-- Mobile menu toggle-->
                        <a class="navbar-toggle">
                            <div class="lines">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </a>
                        <!-- End mobile menu toggle-->
                    </li>

                    <li class="list-inline-item dropdown notification-list">
                        <a class="nav-link dropdown-toggle arrow-none waves-light waves-effect" data-toggle="dropdown"
                           href="#" role="button"
                           aria-haspopup="false" aria-expanded="false">
                            <i class="zmdi zmdi-notifications-none noti-icon"></i>
                            <span id="userNotifyIcon"></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right dropdown-arrow dropdown-lg"
                             aria-labelledby="Preview">
                            <!-- item-->
                            <div class="dropdown-item noti-title">
                                <h5>
                                    <small><span class="badge badge-danger float-right" id="userNotifyNum"></span>通知
                                    </small>
                                </h5>
                            </div>

                            <span id="userNotifyData">
                                <h6 class="text-center">无消息</h6>
                            </span>

                            <!-- All-->
                            <a href="#/user/notify" class="dropdown-item notify-item notify-all">
                                查看更多
                            </a>

                        </div>
                    </li>

                    <li class="list-inline-item dropdown notification-list">
                        <a class="nav-link dropdown-toggle waves-effect waves-light nav-user" data-toggle="dropdown"
                           href="#" role="button"
                           aria-haspopup="false" aria-expanded="false">
                            <img th:src="@{${avatar}}" alt="用户" class="rounded-circle">
                        </a>
                        <div class="dropdown-menu dropdown-menu-right profile-dropdown " aria-labelledby="Preview">
                            <!-- item-->
                            <div class="dropdown-item noti-title">
                                <h5 class="text-overflow">
                                    <small th:text="${'欢迎 ! ' + realName}"></small>
                                </h5>
                            </div>

                            <!-- item-->
                            <a href="#/user/setting" class="dropdown-item notify-item dy_href">
                                <i class="zmdi zmdi-settings"></i> <span>设置</span>
                            </a>

                            <!-- item-->
                            <a href="javascript:$('#logout').submit();" class="dropdown-item notify-item">
                                <i class="zmdi zmdi-power"></i> <span>退出</span>
                            </a>

                        </div>
                    </li>

                    <li hidden>
                        <form th:action="@{/logout}" method="POST" id="logout">
                            <input type="submit"/>
                        </form>
                    </li>

                </ul>

            </div> <!-- end menu-extras -->
            <div class="clearfix"></div>

        </div> <!-- end container -->
    </div>
    <!-- end topbar-main -->


    <div class="navbar-custom">
        <div class="container">
            <div id="navigation">
                <!-- Navigation Menu-->
                <ul class="navigation-menu" th:utext="${menu}">
                </ul>
                <!-- End navigation menu  -->
            </div>
        </div>
    </div>
</header>
<!-- End Navigation Bar-->


<!-- ============================================================== -->
<!-- Start right Content here -->
<!-- ============================================================== -->
<div class="wrapper" id="loading-view">
    <div id="page-wrapper" class="container animated">

        <div class="row" id="systemNotifyData">

        </div>

        <!-- Page-Title -->
        <div class="row">
            <div class="col-sm-12">
                <div class="page-title-box">
                    <h4 class="page-title">欢迎您! <span th:text="${realName}"></span></h4>
                </div>
            </div>
        </div>
        <!-- end row -->

        <div class="row">
            <div class="col-sm-12">
                <div class="jumbotron">
                    <h1 class="display-4">Hello, world!</h1>
                    <p class="lead">躯体总是以惹人厌烦告终。除思想以外，没有什么优美和有意思的东西留下来，因为思想就是生命。 —— 萧伯纳</p>
                </div>
            </div>
        </div>

    </div> <!-- container -->


    <!-- Footer -->
    <footer class="footer" th:include="footer::footer">
    </footer>
    <!-- End Footer -->

</div> <!-- End wrapper -->

<!-- userNotifyModal -->
<div class="modal fade" id="userNotifyModal" tabindex="-1" role="dialog" aria-labelledby="userNotifyModalTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="userNotifyModalTitle"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="userNotifyModalSendUserInfo"></p>
                <p id="userNotifyModalContent"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!--定义系统通知模板-->
<script id="system-notify-template" type="text/x-handlebars-template">
    {{#each listResult}}
    <div class="col-sm-12 m-t-20">
        <div class="alert alert-{{notifyType}}" role="alert">
            <h4 class="alert-heading">{{notify_title}}</h4>
            <p>{{notify_content}}</p>
        </div>
    </div>
    {{/each}}
</script>

<script src="webjarsjs" th:src="@{/webjarsjs}"></script>
<script src="webjars/requirejs/require.min.js" th:src="@{/webjars/requirejs/require.min.js}"
        data-main="/backstage"></script>
<script th:inline="javascript">
    var web_path = /*[[${#httpServletRequest.getScheme()+'://'+#httpServletRequest.getServerName()+':'+#httpServletRequest.getServerPort()+#httpServletRequest.getContextPath()}]]*/ '';
    require.config({
        baseUrl: web_path + "/js/backstage",
        waitSeconds: 0
    });
</script>
</body>
</html>
