!function(S,e,L,x){var r=S.fn.peity=function(e,n){return i&&this.each(function(){var t=S(this),i=t.data("_peity");i?(e&&(i.type=e),S.extend(i.opts,n)):(i=new a(t,e,S.extend({},r.defaults[e],t.data("peity"),n)),t.change(function(){i.draw()}).data("_peity",i)),i.draw()}),this},a=function(t,i,e){this.$el=t,this.type=i,this.opts=e},t=a.prototype,N=t.svgElement=function(t,i){return S(e.createElementNS("http://www.w3.org/2000/svg",t)).attr(i)},i="createElementNS"in e&&N("svg",{})[0].createSVGRect;t.draw=function(){var t=this.opts;r.graphers[this.type].call(this,t),t.after&&t.after.call(this,t)},t.fill=function(){var e=this.opts.fill;return S.isFunction(e)?e:function(t,i){return e[i%e.length]}},t.prepare=function(t,i){return this.$svg||this.$el.hide().after(this.$svg=N("svg",{class:"peity"})),this.$svg.empty().data("peity",this).attr({height:i,width:t})},t.values=function(){return S.map(this.$el.text().split(this.opts.delimiter),function(t){return parseFloat(t)})},r.defaults={},r.graphers={},r.register=function(t,i,e){this.defaults[t]=i,this.graphers[t]=e},r.register("pie",{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},function(t){if(!t.delimiter){var i=this.$el.text().match(/[^0-9\.]/);t.delimiter=i?i[0]:","}var e=S.map(this.values(),function(t){return 0<t?t:0});if("/"==t.delimiter){var n=e[0],r=e[1];e=[n,L.max(0,r-n)]}for(var a=0,h=e.length,s=0;a<h;a++)s+=e[a];s||(h=2,e=[0,s=1]);var l=2*t.radius,p=this.prepare(t.width||l,t.height||l),o=p.width(),f=p.height(),c=o/2,u=f/2,d=L.min(c,u),g=t.innerRadius;"donut"!=this.type||g||(g=.5*d);var m=L.PI,v=this.fill(),y=this.scale=function(t,i){var e=t/s*m*2-m/2;return[i*L.cos(e)+c,i*L.sin(e)+u]},w=0;for(a=0;a<h;a++){var x,k=e[a],$=k/s;if(0!=$){if(1==$)if(g){var j=c-.01,A=u-d,E=u-g;x=N("path",{d:["M",c,A,"A",d,d,0,1,1,j,A,"L",j,E,"A",g,g,0,1,0,c,E].join(" ")})}else x=N("circle",{cx:c,cy:u,r:d});else{var F=w+k,M=["M"].concat(y(w,d),"A",d,d,0,.5<$?1:0,1,y(F,d),"L");g?M=M.concat(y(F,g),"A",g,g,0,.5<$?1:0,0,y(w,g)):M.push(c,u),w+=k,x=N("path",{d:M.join(" ")})}x.attr("fill",v.call(this,k,a,e)),p.append(x)}}}),r.register("donut",S.extend(!0,{},r.defaults.pie),function(t){r.graphers.pie.call(this,t)}),r.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(t){var i=this.values();1==i.length&&i.push(i[0]);for(var e=L.max.apply(L,t.max==x?i:i.concat(t.max)),n=L.min.apply(L,t.min==x?i:i.concat(t.min)),r=this.prepare(t.width,t.height),a=t.strokeWidth,h=r.width(),s=r.height()-a,l=e-n,p=this.x=function(t){return t*(h/(i.length-1))},o=this.y=function(t){var i=s;return l&&(i-=(t-n)/l*s),i+a/2},f=o(L.max(n,0)),c=[0,f],u=0;u<i.length;u++)c.push(p(u),o(i[u]));c.push(h,f),t.fill&&r.append(N("polygon",{fill:t.fill,points:c.join(" ")})),a&&r.append(N("polyline",{fill:"none",points:c.slice(2,c.length-2).join(" "),stroke:t.stroke,"stroke-width":a,"stroke-linecap":"square"}))}),r.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:.1,width:32},function(t){for(var i=this.values(),e=L.max.apply(L,t.max==x?i:i.concat(t.max)),n=L.min.apply(L,t.min==x?i:i.concat(t.min)),r=this.prepare(t.width,t.height),a=r.width(),h=r.height(),s=e-n,l=t.padding,p=this.fill(),o=this.x=function(t){return t*a/i.length},f=this.y=function(t){return h-(s?(t-n)/s*h:1)},c=0;c<i.length;c++){var u,d=o(c+l),g=o(c+1-l)-d,m=i[c],v=f(m),y=v,w=v;s?m<0?y=f(L.min(e,0)):w=f(L.max(n,0)):u=1,0==(u=w-y)&&(u=1,0<e&&s&&y--),r.append(N("rect",{fill:p.call(this,m,c,i),x:d,y:y,width:g,height:u}))}})}(jQuery,document,Math);